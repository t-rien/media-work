import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.util.Arrays;

class MoveByKeyPanel extends JPanel implements KeyListener{
    private int x=200, y=200;   //主人公の初期座標
    private int xbomb[] = new int[100]; //爆弾のx座標で初期値0
    private int ybomb[] = new int[100]; //爆弾のy座標で初期値0
    private int move = 40;       //移動距離
    private int r = 30;
    private int i = 0;           //爆弾の配列の添字
    private int count = 0;       //キーを押した回数
    public MoveByKeyPanel(){
	this.setBackground(Color.white);
	this.setFocusable(true);
	this.addKeyListener(this);
	for(int j = 0; j < 100;j++) xbomb[j] = 1000; //爆弾を見えないところにおいておく
    }
    protected void paintComponent(Graphics g){
	super.paintComponent(g);
	g.setColor(Color.BLUE); //主人公は青色
	g.fillOval(x, y, r, r);
	g.setColor(Color.RED); //爆弾は赤色
	for(int j = 0;j <100;j++){  
	    g.fillOval(xbomb[j], ybomb[j], r, r);
	}                        //爆弾を１００個まで生成
   }
   public void keyPressed(KeyEvent e){
      int k = e.getKeyCode();
      switch(k){
        case KeyEvent.VK_RIGHT:
	  count++;                      //キーを押した回数を１増やす
	  if(count%5 == 1)              //長押ししたときにゆっくり動く
            x = x+move; 
          break;
        case KeyEvent.VK_LEFT:
	  count++;
	  if(count%5 == 1)
            x = x-move; 
          break;
        case KeyEvent.VK_DOWN:
	  count++;
	  if(count%5 == 1)
            y = y+move;
          break;
        case KeyEvent.VK_UP:
	  count++;
	  if(count%5 == 1)
            y = y-move; 
          break;
        case KeyEvent.VK_SPACE: //爆弾を置く
	    xbomb[i] = x;
	    ybomb[i] = y;
	    i++;
	  break;
      }
      repaint();
   }
   public void keyTyped(KeyEvent e){}
   public void keyReleased(KeyEvent e){
    switch(k){
       case KeyEvent.VK_RIGHT:
	   count = 0;                         //長押しを止めたときにキーを押した回数を０に戻す
          break;
        case KeyEvent.VK_LEFT:
	    count = 0;	    
          break;
        case KeyEvent.VK_DOWN:
	    count = 0;	    
          break;
        case KeyEvent.VK_UP:
	    count = 0;	    
          break;
      }
      repaint();
    }
}

class MoveByKeyFrame extends JFrame {
  public MoveByKeyFrame(){
    this.setTitle("MoveByKey Frame");
    this.setSize(500,500);
    this.add(new MoveByKeyPanel());
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setVisible(true);
  }
  public static void main(String argv[]) {
    new MoveByKeyFrame();
 }
}
